import{j as e,y as S,r as g,t as re,S as J}from"./index-4e201d1a.js";import{y as te,t as le,L as ne,W as oe,X as ie,C as ce,A as Y,Y as de,Z as ge,d as pe,l as me,a0 as he,a1 as ue,a2 as xe,z as G,s as W}from"./Layout-7b360987.js";import{u as be,b as P,n as R,L as l,E as k}from"./AdminServices-04341510.js";const Ne=({id:n,name:t,type:c,handleClick:j,isChecked:N})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:n,name:t,type:c,onChange:j,checked:N})}),T=({title:n,handleProcess:t,processOption:c})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex flex-wrap items-center",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:n}),e.jsx(te,{onChange:t,checked:c,className:"react-switch md:ml-0 ml-3",uncheckedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:14,color:"white",paddingRight:5,paddingTop:1},children:"No"}),width:80,height:30,handleDiameter:28,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:14,color:"white",paddingLeft:8,paddingTop:1},children:"Yes"})})]})})}),X=({register:n,name:t,label:c,placeholder:j,required:N,type:C,value:h})=>e.jsx(e.Fragment,{children:e.jsx(S.Textarea,{className:"border text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",...n(`${t}`,{required:N?!1:`${c} is required!`}),type:C,placeholder:j,name:t,value:h,rows:"4",spellCheck:"false"})}),je=(n,t="en",c)=>{const[j,N]=g.useState(""),[C,h]=g.useState([]),p=re(),[_,$]=g.useState(""),[f,H]=g.useState(!0),[u,y]=g.useState(!0),[A,x]=g.useState([]),[I,L]=g.useState([]),[B,K]=g.useState(!1),[b,q]=g.useState(""),{isBulkDrawerOpen:V,closeBulkDrawer:v,setIsUpdate:w}=g.useContext(J),{register:E,handleSubmit:U,watch:F,setValue:r,clearErrors:a,formState:{errors:z}}=be(),M=async s=>{var m,o,D;try{const d={ids:n,categories:A==null?void 0:A.map(i=>i._id),category:(m=I[0])==null?void 0:m._id,productType:[B?"food":"others"],show:s.show,status:f?"show":"hide",tag:JSON.stringify(C)},O={ids:n,status:f?"show":"hide"},Z={ids:n,enabled:f?"show":"hide",live_exchange_rates:u?"show":"hide"},Q={ids:n,parentId:_,description:s.description,parentName:b,status:f?"show":"hide"},ee={ids:n,option:s.option,status:f?"show":"hide"},se={ids:n,currentId:c,changeId:s.groupName,status:f?"show":"hide"},ae={ids:n,startTime:s.startTime,endTime:s.endTime,status:f?"show":"hide"};if(p.pathname==="/products"){const i=await le.updateManyProducts(d);w(!0),P(i.message),v()}if(p.pathname==="/coupons"){const i=await ne.updateManyCoupons(ae);w(!0),P(i.message),v()}if(p.pathname==="/languages"){const i=await oe.updateManyLanguage(O);w(!0),P(i.message),v()}if(p.pathname==="/currencies"){const i=await ie.updateManyCurrencies(Z);w(!0),P(i.message),v()}if(p.pathname==="/categories"||p.pathname===`/categories/${c}`){const i=await ce.updateManyCategory(Q);w(!0),P(i.message),v()}if(p.pathname==="/attributes"){const i=await Y.updateManyAttribute(ee);w(!0),P(i.message),v()}if(p.pathname===`/attributes/${p.pathname.split("/")[2]}`){const i=await Y.updateManyChildAttribute(se);w(!0),P(i.message),v()}}catch(d){R(d?(D=(o=d==null?void 0:d.response)==null?void 0:o.data)==null?void 0:D.message:d.message)}};return g.useEffect(()=>{if(!V){r("parent"),r("children"),r("type"),r("show"),r("name"),N(""),h([]),a("parent"),a("children"),a("type"),a("name"),r("name"),r("iso_code"),r("call_prefix"),r("currency"),r("zone"),a("name"),a("iso_code"),a("call_prefix"),a("currency"),a("zone"),a("status"),r("name"),r("iso_code"),r("country"),r("zone"),r("description"),a("name"),a("iso_code"),a("country"),a("zone"),a("status"),a("show"),a("description"),L([]),x([]);return}},[r,V,a]),g.useEffect(()=>{N(F("children"))},[F,j]),{register:E,watch:F,handleSubmit:U,onSubmit:M,errors:z,tag:C,setTag:h,published:f,setPublished:H,published2:u,setPublished2:y,checked:_,setChecked:$,selectedCategory:A,setSelectedCategory:x,defaultCategory:I,setDefaultCategory:L,selectCategoryName:b,setSelectCategoryName:q,isFoodItem:B,setIsFoodItem:K}},ve=({ids:n,title:t,lang:c,data:j,childId:N,attributes:C,isCheck:h})=>{const{toggleBulkDrawer:p,isBulkDrawerOpen:_,closeBulkDrawer:$}=g.useContext(J),{tag:f,setTag:H,published:u,register:y,onSubmit:A,errors:x,checked:I,setChecked:L,resetRefTwo:B,handleSubmit:K,setPublished:b,selectedCategory:q,setSelectedCategory:V,defaultCategory:v,setDefaultCategory:w,selectCategoryName:E,setSelectCategoryName:U}=je(n,c,N),F={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},r=s=>{let m=[];for(let o of s)m.push({title:W(o==null?void 0:o.name,c),key:o._id,children:o.children.length>0&&r(o.children)});return m},a=(s,m)=>{var o;return s._id===m?s:(o=s==null?void 0:s.children)==null?void 0:o.reduce((D,d)=>D??a(d,m),void 0)},z=s=>{var o,D;const m=h==null?void 0:h.find(d=>d===s);if((h==null?void 0:h.length)===((D=(o=j[0])==null?void 0:o.children)==null?void 0:D.length))return R("This can't be select as a parent category!");if(m!==void 0)return R("This can't be select as a parent category!");if(s===N)return R("This can't be select as a parent category!");{if(s===void 0)return;L(s);const d=j[0],O=a(d,s);U(W(O==null?void 0:O.name,c))}},M=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(de,{open:_,onClose:$,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:p,className:"absolute focus:outline-none z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(ge,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(pe,{title:`Update Selected ${t}`,description:`Apply changes to the selected ${t} from the list`})}),e.jsx(me.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:K(A),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[t==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(he,{lang:c,selectedCategory:q,setSelectedCategory:V,setDefaultCategory:w})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ue,{displayValue:"name",isObject:!0,singleSelect:!0,ref:B,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>w(s),selectedValues:v,options:q,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T,{handleProcess:b,processOption:u}),e.jsx(k,{errorName:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(xe,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:f,onChange:s=>H(s)})})]})]}),t==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(S.Input,{...y("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(k,{errorName:x.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(S.Input,{...y("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(k,{errorName:x.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T,{handleProcess:b,processOption:u}),e.jsx(k,{errorName:x.published})]})]})]}),t==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})}),t==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})}),t==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(X,{required:!0,register:y,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:x.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(S.Input,{readOnly:!0,...y("parent",{required:!1}),name:"parent",value:E||"Home",placeholder:"parent category",type:"text",className:"border h-12 w-full text-sm focus:outline-none block bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:M}}),e.jsx(G,{treeData:r(j),selectedKeys:[I],onSelect:s=>z(s[0]),motion:F,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})]}),t==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(X,{required:!0,register:y,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:x.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(S.Input,{readOnly:!0,...y("parent",{required:!1}),name:"parent",value:E||"Home",placeholder:"parent category",type:"text",className:"border h-12 w-full text-sm focus:outline-none block bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:M}}),e.jsx(G,{treeData:r(j),selectedKeys:[I],onSelect:s=>z(s[0]),motion:F,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})]}),t==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(S.Select,{className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:"option",...y("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(k,{errorName:x.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})]}),t==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(S.Select,{className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:"groupName",...y("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),C==null?void 0:C.map((s,m)=>e.jsx("option",{value:s._id,children:W(s==null?void 0:s.name,c)},m+1))]}),e.jsx(k,{errorName:x.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(l,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(T,{title:"",processOption:u,handleProcess:b})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(S.Button,{onClick:p,className:"h-12 bg-white w-full text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(S.Button,{type:"submit",className:"w-full h-12",children:[" ","Bulk Update ",t]})})]})]})})]})]})})};export{ve as B,Ne as C,T as S,X as T};
