import{O as M,r as o,S as R,x as H,j as e,L as w,y as s}from"./index-4e201d1a.js";import{e as O,u as U,P as V,f as $,n as q,s as z,k as G,i as J,j as K,C as Q}from"./Layout-7b360987.js";import{a as W}from"./CategoryTable-32438c91.js";import{B as X,C as Y}from"./BulkActionDrawer-7e43914e.js";import{L as Z}from"./Loading-225242fc.js";import{N as ee}from"./NotFound-40b6c8ae.js";import{u as se}from"./useFilter-1663f56c.js";import"./iconBase-c8e09bc7.js";import"./AdminServices-04341510.js";import"./InputArea-1751f9c9.js";import"./EditDeleteButton-4abd9477.js";import"./dayjs.min-8238a389.js";import"./xlsx-04f2268f.js";const ge=()=>{const{id:c}=M(),[d,A]=o.useState([]),[C,v]=o.useState([]),[f,P]=o.useState(!1),[h,m]=o.useState([]),{toggleDrawer:S,lang:p}=o.useContext(R),{handleDeleteMany:B,allId:T,handleUpdateMany:F}=O(),{data:x,loading:u,error:N}=U(Q.getAllCategory),{t}=H();o.useEffect(()=>{var y,k;const a=(l,n,i=[])=>{for(let r of n){if(r._id===l)return i.concat(r);const j=a(l,r==null?void 0:r.children,i==null?void 0:i.concat(r));if(j)return j}},g=(l,n)=>{var i;return l._id===n?l:(i=l==null?void 0:l.children)==null?void 0:i.reduce((r,j)=>r??g(j,n),void 0)};if(!u){const l=g(x[0],c),n=a(c,(y=x[0])==null?void 0:y.children);((k=l==null?void 0:l.children)==null?void 0:k.length)>0&&(A(l==null?void 0:l.children),v(n))}},[c,u,x,d]);const{totalResults:I,resultsPerPage:D,dataTable:E,serviceData:b,handleChangePage:L}=se(d),_=()=>{P(!f),m(d==null?void 0:d.map(a=>a._id)),f&&m([])};return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:t("CategoryPageTitle")}),e.jsx($,{ids:T,setIsCheck:m,category:!0}),e.jsx(X,{ids:T,title:"Child Categories",lang:p,data:x,childId:c}),e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(w,{to:"/categories",children:t("Categories")})}),C==null?void 0:C.map((a,g)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(q,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-green-500 font-semibold ",children:e.jsx(w,{to:`/categories/${a._id}`,children:z(a==null?void 0:a.name,p)})})]},g+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:S,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(G,{})}),t("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(s.Button,{disabled:h.length<1,onClick:()=>F(h),className:"w-full rounded-md h-12",children:[e.jsx(J,{}),t("BulkAction")]})}),e.jsxs(s.Button,{disabled:h.length<1,onClick:()=>B(h),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(K,{})}),t("Delete")]})]})})}),u?e.jsx(Z,{loading:u}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(b==null?void 0:b.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(Y,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:_,isChecked:f})}),e.jsx(s.TableCell,{children:t("catIdTbl")}),e.jsx(s.TableCell,{children:t("catIconTbl")}),e.jsx(s.TableCell,{children:t("Name")}),e.jsx(s.TableCell,{children:t("Description")}),e.jsx(s.TableCell,{className:"text-center",children:t("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:t("catActionsTbl")})]})}),e.jsx(W,{categories:E,data:x,lang:p,isCheck:h,setIsCheck:m,useParamId:c})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:I,resultsPerPage:D,onChange:L,label:"Table navigation"})})]}):e.jsx(ee,{title:"Sorry, There are no categories right now."})]})};export{ge as default};
